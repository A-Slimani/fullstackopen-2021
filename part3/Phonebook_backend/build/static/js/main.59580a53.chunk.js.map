{"version":3,"sources":["PersonForm.js","Persons.js","Filter.js","components/Notification.js","services/Person.js","App.js","index.js"],"names":["PersonForm","addName","newName","handleNameChange","newNum","handleNumChange","onSubmit","value","onChange","type","Persons","persons","deletePerson","map","p","i","name","number","id","onClick","Filter","setFilter","target","console","log","Notification","message","error","className","baseUrl","axios","get","then","response","data","newObj","post","put","delete","App","useState","setPersons","filter","setNewName","setNewNum","refresh","setRefresh","setMessage","isError","setError","useEffect","personService","namesToShow","toLowerCase","match","e","preventDefault","newPerson","find","window","alert","confirm","catch","setTimeout","concat","currentTarget","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.59580a53.chunk.js","sourcesContent":["import React from \"react\";\n\nconst PersonForm = ({\n  addName,\n  newName,\n  handleNameChange,\n  newNum,\n  handleNumChange,\n}) => {\n  return (\n    <form onSubmit={addName}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNum} onChange={handleNumChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, deletePerson }) => {\n  // console.log(\"current persons: \", persons)\n  return (\n    <ul>\n      {persons.map((p, i) => (\n        <li>\n          {p.name} {p.number}\n          <button id={i} onClick={deletePerson}>\n            delete\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Filter = ({setFilter}) => {\n  return (\n    <form>\n      <div>\n        filter shown with\n        <input onChange={({target}) => {\n          setFilter(target.value)\n          console.log(target.value)\n        }}></input>\n      </div>\n    </form>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Notification = ({ message, error }) => {\n  if (message === null) return null;\n  if (error) return <div className=\"error\">{message}</div>;\n  return <div className=\"added\">{message}</div>;\n};\n\nexport default Notification;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = newObj => {\n  return axios.post(baseUrl, newObj);\n};\n\nconst update = (id, newObj) => {\n  return axios.put(`${baseUrl}/${id}`, newObj);\n};\n\nconst remove = id => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nexport default { getAll, create, update, remove };\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\nimport Filter from \"./Filter\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/Person\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [refresh, setRefresh] = useState(false);\n  const [message, setMessage] = useState(null);\n  const [isError, setError] = useState(false);\n\n  useEffect(() => {\n    personService.getAll().then(persons => {\n      setPersons(persons);\n      setRefresh(false);\n    });\n  }, [refresh]);\n\n  const addName = e => {\n    e.preventDefault();\n    const newPerson = { name: newName, number: newNum };\n\n    if (!persons.find(p => p.name === newPerson.name)) {\n      personService\n        .create(newPerson)\n        .then(() => {\n          setPersons(persons.concat(newPerson));\n          setRefresh(true);\n          setMessage(`Added ${newPerson.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch(error => {\n          setError(true);\n          setMessage(`${error.response.data.error}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n    } else {\n      for (const p of persons) {\n        if (newName === \"\" || newNum === \"\") {\n          window.alert(\"missing name and or number\");\n        } else if (p.name === newPerson.name) {\n          if (p.number === newPerson.number) {\n            window.alert(\n              `${newPerson.name} and ${newPerson.number} is already added to the phonebook`\n            );\n          } else {\n            if (\n              window.confirm(\n                `${newPerson.name} is already added to the phonebook, replace the old number with a new one?`\n              )\n            ) {\n              personService.update(p.id, newPerson).catch(() => {\n                setMessage(\n                  `Information of '${newPerson.name}' had already been removed from the server`\n                );\n              });\n              setMessage(`${p.name} has been updated`);\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n              setRefresh(true);\n            }\n          }\n        }\n      }\n    }\n    setNewName(\"\");\n    setNewNum(\"\");\n  };\n\n  const deletePerson = e => {\n    if (window.confirm(`Delete ${persons[e.currentTarget.id].name}`)) {\n      personService.remove(persons[e.currentTarget.id].id);\n      setRefresh(true);\n      setMessage(`${persons[e.currentTarget.id].name} removed`);\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    }\n  };\n\n  const namesToShow =\n    filter === \"\"\n      ? persons\n      : persons.filter(p => p.name.toLowerCase().match(filter.toLowerCase()));\n\n  const handleNameChange = e => {\n    e.preventDefault();\n    setNewName(e.target.value);\n  };\n\n  const handleNumChange = e => {\n    e.preventDefault();\n    setNewNum(e.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} error={isError} />\n      <br />\n      <Filter setFilter={setFilter} />\n      <h2>Add a new</h2>\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNum={newNum}\n        handleNumChange={handleNumChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={namesToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\nimport './index.css'\n\n// const promise = axios.get(\"/api/persons\").then((response) => {\n//   const notes = response.data;\n//   console.log(notes);\n// });\n// console.log(promise);\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// http://localhost:3001/persons"],"sourceRoot":""}